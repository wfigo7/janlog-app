# Janlog Backend - direnv設定（シンプル版）
# このディレクトリに入ると自動で環境変数が設定されます

# 注意: direnvでのvenv自動有効化は複雑なため、手動でvenvを有効化してください
# 手動有効化: source venv/Scripts/activate (Windows) または source venv/bin/activate (Linux/Mac)

echo "📁 Janlog Backend directory"
if [ -d "venv" ]; then
    echo "🐍 venv found - activate manually with:"
    if [ -d "venv/Scripts" ]; then
        echo "   source venv/Scripts/activate"
    else
        echo "   source venv/bin/activate"
    fi
else
    echo "⚠️  venv not found. Create with: python -m venv venv"
fi

# .env.localファイルの読み込み
if [ -f ".env.local" ]; then
    dotenv .env.local
    echo "📝 .env.local loaded"
else
    echo "⚠️  .env.local not found. Please create it from .env.sample"
fi

# 開発用のエイリアス設定
alias start-server="python run_local.py"
alias create-tables="python scripts/create_local_tables.py --with-sample-data"
alias generate-jwt="python scripts/generate_mock_jwt.py"
alias run-tests="python -m pytest tests/ -v"

echo "🚀 Janlog Backend environment ready!"
echo "Available commands:"
echo "  start-server    - Start FastAPI server"
echo "  create-tables   - Create DynamoDB tables with sample data"
echo "  generate-jwt    - Generate mock JWT token"
echo "  run-tests       - Run unit tests"